<!DOCTYPE html>

<html>
<head>
  <meta name="viewport" content="width=device-width" />
  <title>@ViewBag.Title</title>

  <!--Инициализация HTML5 элементов для IE (версия ниже 9)-->
  @if (Context.Request.Browser.Type.Contains("IE") || Context.Request.Browser.Type.Contains("InternetExplorer"))
  {
    <script src="~/Scripts/html5shiv.min.js"></script>
    <script src="~/Scripts/html5shiv-printshiv.min.js"></script>
    <script src="~/Scripts/jquery-1.11.0.min.js"></script>
  }

  @if (!Context.Request.Browser.Type.Contains("IE") && !Context.Request.Browser.Type.Contains("InternetExplorer"))
  {
    <script src="~/Scripts/jquery-2.0.3.min.js"></script>
  }

  <!--MS unobstractive validation-->
  <!--#region JQuery.Validation-->
  <script src="~/Scripts/jquery.validate.min.js"></script>  
  <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
  <script src="~/Scripts/Lib/JQuery.Validation/Boolean.Extension.ValidationAdapter.js"></script>
  <!--#endregion-->
  <script src="~/Scripts/require.js"></script>
  <!--Стоит отдельно от require.js, т.к. нужна синхронная загрузка-->
  <script src="~/Scripts/Framework/RequireJs/config.js"></script>
  <script src="~/Content/MetroUICSS/min/jquery.widjet.min.js"></script>
  <script src="~/Content/MetroUICSS/min/metro.min.js"></script>
  <script src="~/bower_components/Buttons/js/buttons.js"></script>
  <!--#region ICheck. Jquery plugin for checkboxes, options and so on-->
  <script src="~/bower_components/jquery-icheck/icheck.min.js"></script>
  <script>
    $(function () {
      $("input[type='checkbox']").not("[data-icheck='true']").css({ "position": "absolute", "top": "0", "left": "0", "visibility": "hidden" });

      $('input[data-icheck="true"]').iCheck({
        labelHover: false,
        cursor: true,
        checkboxClass: 'icheckbox_square-green',
        radioClass: 'icheckbox_square-green',
        increaseArea: '20%'
      }).on("ifChanged", function (event) {
        $(event.currentTarget).closest(".b-ib").find(".b-ib_checkbox").click();
      });
    });
  </script>
  <!--#endregion-->
  <!--#region Open tool tip-->
  <script src="~/bower_components/opentip/downloads/opentip-jquery.js"></script>
  <script>
    Opentip.styles.BlackStyle = {
      extends: "dark",
      fixed: true
    };
  </script>
  <!--#endregion-->

  <link href="~/Content/MetroUICSS/min/metro-bootstrap.min.css" rel="stylesheet" />
  <link href="~/bower_components/fontawesome/css/font-awesome.min.css" rel="stylesheet" />
  <link href="~/bower_components/Buttons/css/buttons.css" rel="stylesheet" />  
  <link href="~/Content/stylesheets/screen.css" rel="stylesheet" />
  <link href="~/bower_components/opentip/css/opentip.css" rel="stylesheet" />  
  <link href="~/bower_components/jquery-icheck/skins/square/green.css" rel="stylesheet" />
  @(new MLMExchange.Lib.ViewStyle(ViewContext).RenderPrivatePageStyle())

  @if (Context.Request.Browser.Type.Contains("IE") || Context.Request.Browser.Type.Contains("InternetExplorer"))
  {
    <link href="~/Content/stylesheets/IE_lt_9.css" rel="stylesheet" />
  }
</head>  

<!--class metro is require for metro ui-->
<body class="metro">
  <!--#region Дефолтные параметры для формы-->
  <script type="text/javascript">
    require(["jquery", "Lib/Form"], function ($, formModule) {
      $(function () {
        $.each($("form"), function (index, form) {
          new formModule.Form($(form)).ApplyDefaults();
        });
      });
    });
  </script>
  <!--#endregion-->

  <div class="main-wrapper">

    <section class="main-changable-content clearfix">
      <header class="main-header">
        <div class="main-header-top">
          <nav class="buttons">
            <a class="b-button b-button_color_light-blue b-button_hover-animate_border-bottom logo" href="/" title="@MLMExchange.Properties.ResourcesA.Logo">
              <i class="pb-icon"></i>
            </a>
            <a class="b-button b-button_color_light-blue b-button_hover-animate_border-bottom faq" href="/MyCrypt" title="@MLMExchange.Properties.ResourcesA.MyCryptPage">
              <div class="pb-text">@MLMExchange.Properties.ResourcesA.Exchange</div>
            </a>
            <a class="b-button b-button_color_normal-blue b-button_hover-animate_border-bottom contacts" href="/Contacts" title="@MLMExchange.Properties.ResourcesA.Contacts">
              <div class="pb-text">@MLMExchange.Properties.ResourcesA.Contacts</div>
            </a>
          </nav>

          <div class="main-registration-block">
            @if (MLMExchange.Lib.CurrentSession.Default.CurrentUser == null)
            {
              <div class="b-button b-button_hover-animate_border-bottom enter-button">
                <div class="pb-text">@MLMExchange.Properties.ResourcesA.Enter</div>

                @{Html.RenderPartial("_LoginForm", (MLMExchange.Models.Registration.LoginModel)ViewBag.LoginModel);}
              </div>

              <a href="/Account/Register">
                <div class="b-button b-button_hover-animate_border-bottom register-button">
                  <div class="pb-text">@MLMExchange.Properties.ResourcesA.Registration</div>
                </div>
              </a>
            }
            else
            {
              <div class="login-on-block">
                @if (String.IsNullOrEmpty(MLMExchange.Lib.CurrentSession.Default.CurrentUser.PhotoRelativePath))
                {
                  <img src="/Content/images/Form/@(new MLMExchange.Lib.Image.Image("Content/images/Form/", "anonymous-user.png").Crop(52, 52).FullName)" class="login-on-block__avatar" alt="Alternate Text" />
                  @*<img src="/Content/images/Form/anonymous-user_52X44.png" class="login-on-block__avatar" alt="Alternate Text" />*@
                }
                else
                {
                  <img src="/@MLMExchange.Lib.Image.Image.UploadRelativeDir/@(new MLMExchange.Lib.Image.Image(MLMExchange.Lib.CurrentSession.Default.CurrentUser.PhotoRelativePath).Crop(52, 52).FullName)" 
                       class="login-on-block__avatar" alt="Alternate Text" />
                }
                <div class="login-on-block__nickname">@MLMExchange.Lib.CurrentSession.Default.CurrentUser.Name @MLMExchange.Lib.CurrentSession.Default.CurrentUser.Surname @MLMExchange.Lib.CurrentSession.Default.CurrentUser.Patronymic</div>
                <a href="/account/logout"><div class="login-on-block__exit"></div></a>
              </div>
            }
          </div>
        </div>
      </header>

      <hr class="b-hr" />

      @RenderBody()
    </section>

    <div class="main-footer">
      <div class="sosial-buttons__outer-wrapper">
        <div class="sosial-buttons__inner-wrapper">
          <div class="b-button b-button_color_light-grey b-button_hover-animate_border-bottom sosial-button"><i class="icon twitter"></i></div>
          <div class="b-button b-button_color_light-grey b-button_hover-animate_border-bottom sosial-button"><i class="icon facebook"></i></div>
          <div class="b-button b-button_color_light-grey b-button_hover-animate_border-bottom sosial-button sosial-button_location_last"><i class="icon vkontakte"></i></div>
        </div>
      </div>

      <hr class="b-hr" />
      <nav class="buttons">
        <div class="b-button b-button_action_no-active b-button_hover-animate_border-bottom">
          <a href="/About">
            <i class="b-icon home"></i>
            <div class="b-text">
              @MLMExchange.Properties.ResourcesA.AboutUs
            </div>
          </a>
        </div>
        <div class="b-button b-button_action_no-active b-button_hover-animate_border-bottom">
          <a href="/MyCrypt">
            <i class="b-icon mycrypt"></i>
            <div class="b-text">
              @MLMExchange.Properties.ResourcesA.MyCryptPage
            </div>
          </a>
        </div>
        <div class="b-button b-button_action_no-active b-button_hover-animate_border-bottom">
          <a href="/Copyright">
            <i class="b-icon copyright"></i>
            <div class="b-text">
              @MLMExchange.Properties.ResourcesA.CopyRight
            </div>
          </a>
        </div>
        <div class="b-button b-button_action_no-active b-button_hover-animate_border-bottom">
          <a href="/FAQ">
            <i class="b-icon faq"></i>
            <div class="b-text">
              @MLMExchange.Properties.ResourcesA.FAQ
            </div>
          </a>
        </div>
        <div class="b-button b-button_action_no-active b-button_hover-animate_border-bottom ie8-last-child">
          <a href="/Contacts">
            <i class="b-icon contacts"></i>
            <div class="b-text">
              @MLMExchange.Properties.ResourcesA.Contacts
            </div>
          </a>
        </div>
      </nav>
    </div>
  </div>
</body>
</html>
